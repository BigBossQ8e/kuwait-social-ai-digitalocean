<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuwait Social AI - Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }

        /* Header */
        .header {
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo h1 {
            font-size: 24px;
            color: #007bff;
        }

        .nav-menu {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .nav-menu a {
            text-decoration: none;
            color: #666;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-menu a:hover,
        .nav-menu a.active {
            color: #007bff;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .btn {
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background-color: #0056b3;
        }

        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
        }

        /* Main Layout */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* Welcome Section */
        .welcome-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .welcome-section h2 {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .welcome-section p {
            font-size: 18px;
            opacity: 0.9;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stat-info h3 {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: #333;
        }

        .stat-icon {
            font-size: 40px;
            opacity: 0.3;
        }

        /* Quick Actions */
        .quick-actions {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .quick-actions h3 {
            font-size: 20px;
            margin-bottom: 20px;
        }

        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .action-card {
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            color: #333;
        }

        .action-card:hover {
            border-color: #007bff;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .action-card .icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .action-card h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .action-card p {
            font-size: 14px;
            color: #666;
        }

        /* Recent Posts */
        .recent-posts {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .recent-posts-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .recent-posts h3 {
            font-size: 20px;
        }

        .post-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .post-item {
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            gap: 15px;
            align-items: start;
        }

        .post-image {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            background-color: #e9ecef;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
        }

        .post-content {
            flex: 1;
        }

        .post-content h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .post-content p {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }

        .post-meta {
            display: flex;
            gap: 20px;
            font-size: 12px;
            color: #999;
        }

        .post-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-scheduled {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-published {
            background-color: #d4edda;
            color: #155724;
        }

        .status-draft {
            background-color: #e2e3e5;
            color: #383d41;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state .icon {
            font-size: 60px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state h4 {
            font-size: 18px;
            margin-bottom: 10px;
            color: #666;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            overflow-y: auto;
        }

        .modal-content {
            background-color: white;
            margin: 50px auto;
            padding: 0;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
            color: #333;
        }

        .modal-close {
            font-size: 28px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
            line-height: 20px;
        }

        .modal-close:hover {
            color: #000;
        }

        .modal-body {
            padding: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #333;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .language-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .language-toggle button {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .language-toggle button.active {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }

        .modal-footer {
            padding: 20px;
            border-top: 1px solid #dee2e6;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .nav-menu {
                display: none;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .action-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <h1>Kuwait Social AI</h1>
            </div>
            <nav class="nav-menu">
                <a href="#" class="active">Dashboard</a>
                <a href="#posts">Posts</a>
                <a href="#analytics">Analytics</a>
                <a href="#settings">Settings</a>
            </nav>
            <div class="user-menu">
                <span id="userEmail">Loading...</span>
                <button class="btn btn-secondary" onclick="logout()">Logout</button>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Welcome Section -->
        <div class="welcome-section">
            <h2>Welcome back, <span id="clientName">Client</span>! 👋</h2>
            <p>Ready to create amazing content for your social media?</p>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-info">
                    <h3>Posts This Month</h3>
                    <div class="stat-value" id="postsUsed">0</div>
                </div>
                <div class="stat-icon">📝</div>
            </div>
            <div class="stat-card">
                <div class="stat-info">
                    <h3>Posts Remaining</h3>
                    <div class="stat-value" id="postsRemaining">-</div>
                </div>
                <div class="stat-icon">📊</div>
            </div>
            <div class="stat-card">
                <div class="stat-info">
                    <h3>Scheduled</h3>
                    <div class="stat-value" id="scheduledPosts">0</div>
                </div>
                <div class="stat-icon">📅</div>
            </div>
            <div class="stat-card">
                <div class="stat-info">
                    <h3>Published</h3>
                    <div class="stat-value" id="publishedPosts">0</div>
                </div>
                <div class="stat-icon">✅</div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <h3>Quick Actions</h3>
            <div class="action-grid">
                <div class="action-card" onclick="openAIModal()">
                    <div class="icon">🤖</div>
                    <h4>Generate AI Content</h4>
                    <p>Create posts with AI</p>
                </div>
                <div class="action-card" onclick="openUploadModal()">
                    <div class="icon">📸</div>
                    <h4>Upload Image</h4>
                    <p>Enhance & caption images</p>
                </div>
                <div class="action-card" onclick="openScheduleModal()">
                    <div class="icon">📅</div>
                    <h4>Schedule Post</h4>
                    <p>Plan your content</p>
                </div>
                <div class="action-card" onclick="viewAnalytics()">
                    <div class="icon">📊</div>
                    <h4>View Analytics</h4>
                    <p>Track performance</p>
                </div>
            </div>
        </div>

        <!-- Recent Posts -->
        <div class="recent-posts">
            <div class="recent-posts-header">
                <h3>Recent Posts</h3>
                <button class="btn btn-primary" onclick="viewAllPosts()">View All</button>
            </div>
            <div class="post-list" id="postList">
                <div class="empty-state">
                    <div class="icon">📝</div>
                    <h4>No posts yet</h4>
                    <p>Start creating amazing content with AI!</p>
                    <button class="btn btn-primary" onclick="openAIModal()">Create First Post</button>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Content Generation Modal -->
    <div id="aiModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Generate AI Content</h3>
                <span class="modal-close" onclick="closeAIModal()">&times;</span>
            </div>
            <form id="aiForm" onsubmit="generateContent(event)">
                <div class="modal-body">
                    <div class="form-group">
                        <label>Content Type</label>
                        <select id="contentType" required>
                            <option value="instagram">Instagram Post</option>
                            <option value="facebook">Facebook Post</option>
                            <option value="twitter">Twitter/X Post</option>
                            <option value="linkedin">LinkedIn Post</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>What's your post about?</label>
                        <textarea id="prompt" placeholder="E.g., Announcing our new coffee blend, special Ramadan offers, etc." required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Tone</label>
                        <select id="tone">
                            <option value="professional">Professional</option>
                            <option value="casual">Casual</option>
                            <option value="enthusiastic">Enthusiastic</option>
                            <option value="informative">Informative</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Language</label>
                        <div class="language-toggle">
                            <button type="button" class="active" onclick="setLanguage('en')">English</button>
                            <button type="button" onclick="setLanguage('ar')">Arabic</button>
                            <button type="button" onclick="setLanguage('both')">Both</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="includeHashtags" checked>
                            Include hashtags
                        </label>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="kuwaitOptimized" checked>
                            Optimize for Kuwait market
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeAIModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="generateBtn">
                        Generate Content
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Generated Content Result -->
    <div id="resultModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Generated Content</h3>
                <span class="modal-close" onclick="closeResultModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Generated Caption</label>
                    <textarea id="generatedContent" rows="6" readonly></textarea>
                </div>
                <div class="form-group" id="arabicContent" style="display: none;">
                    <label>Arabic Version</label>
                    <textarea id="generatedArabic" rows="6" readonly dir="rtl"></textarea>
                </div>
                <div class="form-group" id="hashtagsSection" style="display: none;">
                    <label>Suggested Hashtags</label>
                    <input type="text" id="generatedHashtags" readonly>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="regenerateContent()">
                    🔄 Regenerate
                </button>
                <button type="button" class="btn btn-primary" onclick="useContent()">
                        Use This Content
                </button>
            </div>
        </div>
    </div>

    <script>
        // Check authentication
        const token = localStorage.getItem('access_token');
        const user = JSON.parse(localStorage.getItem('user') || '{}');
        
        if (!token) {
            window.location.href = '/login';
        }

        // Set user info
        document.getElementById('userEmail').textContent = user.email || 'Client';
        document.getElementById('clientName').textContent = user.contact_name || user.company_name || 'Client';

        // Load dashboard data
        async function loadDashboard() {
            try {
                // In production, fetch from API
                document.getElementById('postsUsed').textContent = user.monthly_posts_used || 0;
                document.getElementById('postsRemaining').textContent = 
                    (user.monthly_posts_limit || 30) - (user.monthly_posts_used || 0);
                
                // Load recent posts
                loadRecentPosts();
            } catch (error) {
                console.error('Error loading dashboard:', error);
            }
        }

        function loadRecentPosts() {
            // In production, fetch from API
            const posts = [
                {
                    id: 1,
                    caption: "Excited to announce our special Ramadan offers! 🌙",
                    platform: "instagram",
                    status: "published",
                    date: "2024-03-15",
                    engagement: { likes: 145, comments: 23 }
                },
                {
                    id: 2,
                    caption: "Join us for an exclusive Kuwait National Day celebration!",
                    platform: "facebook",
                    status: "scheduled",
                    date: "2024-02-25",
                    engagement: { likes: 0, comments: 0 }
                }
            ];

            if (posts.length > 0) {
                const postList = document.getElementById('postList');
                postList.innerHTML = posts.map(post => `
                    <div class="post-item">
                        <div class="post-image">
                            📱
                        </div>
                        <div class="post-content">
                            <h4>${post.caption.substring(0, 50)}...</h4>
                            <p>Platform: ${post.platform}</p>
                            <div class="post-meta">
                                <span class="post-status status-${post.status}">${post.status}</span>
                                <span>📅 ${post.date}</span>
                                ${post.status === 'published' ? 
                                    `<span>❤️ ${post.engagement.likes} 💬 ${post.engagement.comments}</span>` : ''}
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }

        // AI Modal Functions
        let selectedLanguage = 'en';

        function openAIModal() {
            document.getElementById('aiModal').style.display = 'block';
        }

        function closeAIModal() {
            document.getElementById('aiModal').style.display = 'none';
        }

        function setLanguage(lang) {
            selectedLanguage = lang;
            document.querySelectorAll('.language-toggle button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        async function generateContent(event) {
            event.preventDefault();
            
            const generateBtn = document.getElementById('generateBtn');
            generateBtn.innerHTML = '<span class="loading"></span> Generating...';
            generateBtn.disabled = true;

            // Simulate AI generation
            setTimeout(() => {
                const prompt = document.getElementById('prompt').value;
                const contentType = document.getElementById('contentType').value;
                const includeHashtags = document.getElementById('includeHashtags').checked;
                
                // Mock generated content
                let content = `🌟 ${prompt}\n\n`;
                content += "Transform your social media presence with our innovative solutions. ";
                content += "Join thousands of satisfied customers in Kuwait who trust us for quality and excellence.\n\n";
                content += "📞 Contact us today to learn more!";

                let arabicContent = "🌟 حول تواجدك على وسائل التواصل الاجتماعي مع حلولنا المبتكرة.\n";
                arabicContent += "انضم إلى آلاف العملاء الراضين في الكويت الذين يثقون بنا.\n";
                arabicContent += "📞 اتصل بنا اليوم لمعرفة المزيد!";

                let hashtags = "#Kuwait #KuwaitBusiness #Q8 #الكويت #كويت_بيزنس";
                if (contentType === 'instagram') {
                    hashtags += " #InstaKuwait #KuwaitInstagram";
                }

                // Show results
                document.getElementById('generatedContent').value = content;
                
                if (selectedLanguage === 'ar' || selectedLanguage === 'both') {
                    document.getElementById('arabicContent').style.display = 'block';
                    document.getElementById('generatedArabic').value = arabicContent;
                }
                
                if (includeHashtags) {
                    document.getElementById('hashtagsSection').style.display = 'block';
                    document.getElementById('generatedHashtags').value = hashtags;
                }

                closeAIModal();
                document.getElementById('resultModal').style.display = 'block';
                
                generateBtn.innerHTML = 'Generate Content';
                generateBtn.disabled = false;
            }, 2000);
        }

        function closeResultModal() {
            document.getElementById('resultModal').style.display = 'none';
        }

        function regenerateContent() {
            closeResultModal();
            openAIModal();
        }

        function useContent() {
            // In production, save to drafts or schedule
            alert('Content saved to drafts! You can now schedule it for posting.');
            closeResultModal();
            loadDashboard();
        }

        // Other functions
        function openUploadModal() {
            alert('Image upload feature coming soon!');
        }

        function openScheduleModal() {
            alert('Post scheduling feature coming soon!');
        }

        function viewAnalytics() {
            alert('Analytics feature coming soon!');
        }

        function viewAllPosts() {
            alert('All posts view coming soon!');
        }

        function logout() {
            localStorage.clear();
            window.location.href = '/login';
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }

        // Initialize
        loadDashboard();
    </script>
</body>
</html>